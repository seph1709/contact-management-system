import{W as E,r as i,j as e,y as I}from"./app-BM66FXAr.js";import{G as f}from"./iconBase-DXZzP0jo.js";import{B as y,a as v}from"./index-DVzZXOfA.js";function k(t){return f({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 256c52.805 0 96-43.201 96-96s-43.195-96-96-96-96 43.201-96 96 43.195 96 96 96zm0 48c-63.598 0-192 32.402-192 96v48h384v-48c0-63.598-128.402-96-192-96zM112 224v-64H80v64H16v32h64v64h32v-64h64v-32h-64z"},child:[]}]})(t)}function M(t){return f({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"},child:[]}]})(t)}function N(){const{data:t,setData:o,errors:b}=E(),[c,p]=i.useState(),[h,S]=i.useState("password"),[g,z]=i.useState("password"),[C,m]=i.useState(),[u,d]=i.useState(),[P,x]=i.useState();function T(){fetch("/api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})}).then(s=>s.json()).then(s=>{const{token:r,user:a}=s,{name:l}=a,{id:n}=a;localStorage.setItem("startingData",JSON.stringify([])),localStorage.setItem("userName",l),localStorage.setItem("rawToken",r),localStorage.setItem("userID",n),I.visit("workplace",{headers:{Accept:"application/json",Authorization:"Bearer "+r},data:{rawToken:r,userID:n,userName:l}})}).catch(s=>console.error(s))}function F(s){s.preventDefault(),console.log(s),fetch("/api/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(async r=>{if(console.log(r),r.status!==200){p(r.statusText);const a=await r.json(),{errors:l}=a,{email:n,password:j,name:w}=l;n&&m(n),j&&d(j),w&&x(w)}else T()}).catch(r=>{p("error occur")}),console.log(t),console.log(b)}return e.jsxs("div",{id:"login-wrapper",children:[e.jsx("div",{id:"bg-register",children:e.jsxs("div",{id:"register-container",children:[e.jsxs("div",{id:"register-header",children:["Register","  ",e.jsx("span",{children:e.jsx(k,{size:22,style:{display:"inline"}})})]}),e.jsx("form",{onSubmit:F,children:e.jsxs("div",{id:"register-body",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",children:"username"}),e.jsx("input",{name:"username",onChange:s=>{o("name",s.target.value),x(null)},style:P?{border:"1px solid red"}:null})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"email"}),e.jsx("input",{name:"email",onChange:s=>{o("email",s.target.value),m(null)},style:C?{border:"1px solid red"}:null})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"password"}),e.jsx("input",{name:"password",onChange:s=>{o("password",s.target.value),d(null)},type:h,style:u?{border:"1px solid red"}:null}),e.jsxs("div",{role:"button",id:"toggle-password",onClick:s=>{S(r=>r==="password"?"text":"password")},children:[" ",e.jsx("span",{}),h==="password"?e.jsxs(e.Fragment,{children:[" ",e.jsx(y,{size:14,style:{display:"inline",marginRight:"5px"}})," ","show"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:14,style:{display:"inline",marginRight:"5px"}}),"hide"]}),"  "," password"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-password",children:"confirm password"}),e.jsx("input",{name:"confirm-password",type:g,onChange:s=>{o("password_confirmation",s.target.value),d(null)},style:u?{border:"1px solid red"}:null}),e.jsxs("div",{role:"button",id:"toggle-password",onClick:s=>{z(r=>r==="password"?"text":"password")},children:[" ",e.jsx("span",{}),g==="password"?e.jsxs(e.Fragment,{children:[" ",e.jsx(y,{size:14,style:{display:"inline",marginRight:"5px"}})," ","show"]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{size:14,style:{display:"inline",marginRight:"5px"}}),"hide"]}),"  "," password"]})]}),c&&e.jsx("div",{style:{color:"red",fontSize:"14px"},children:c}),e.jsx("div",{id:"submit-register-wrapper",children:e.jsx("button",{role:"button",id:"submit-register",children:"submit"})})]})})]})}),e.jsx("div",{id:"login-img",children:e.jsxs("div",{id:"login-notice",children:["Please"," ",e.jsx("div",{style:{display:"block"},children:e.jsxs("span",{style:{display:"inline"},children:["register"," ",e.jsx(M,{size:55,style:{display:"inline"}})]})})," ","to continue."]})})]})}export{N as default};
